{"version":3,"file":"static/webpack/static/development/pages/index.js.94143b6c15384d1fbae7.hot-update.js","sources":["webpack:///./sagas/index.js"],"sourcesContent":["import { call, put, takeLatest, select } from 'redux-saga/effects'\n\nexport const LOAD_BOX3 = 'LOAD_BOX3'\nexport const WEB3_LOADING = 'WEB3_LOADING'\nexport const LOAD_BOX3_PENDING = 'LOAD_BOX3_PENDING'\nexport const LOAD_BOX3_COMPLETE = 'LOAD_BOX3_COMPLETE'\n\nimport Box from '3box';\n\nexport function* loadBox3() {\n    yield put({\n        type: WEB3_LOADING\n    })\n    const addresses = yield call(window.ethereum.enable)\n    const myAddress = addresses[0];\n    \n    yield put({\n        type: LOAD_BOX3_PENDING\n    })\n    // // get my box and profile\n    const box = yield call(Box.openBox, myAddress, window.ethereum, {})\n    const myProfile = yield call(Box.getProfile, myAddress)\n\n\n    yield call(box.onSyncDone)\n\n    // open 3chat space\n    // const chatSpace = await box.openSpace('3chat');\n    // const myDid = chatSpace.DID;\n\n    // // set all to state and continue\n    // const loggedIn = true\n    // this.setState({ chatSpace, box, myProfile, myAddress, myDid, loggedIn });\n\n\n    yield put({\n        type: LOAD_BOX3_COMPLETE,\n        payload: {\n            box,\n            myProfile,\n            myAddress,\n            loggedIn: true\n            // box, myProfile, myAddress\n        }\n    })\n}\n\nexport function* loadSpace() {\n    Box.getSpace(address, name, opts)\n}\n\n\nexport default function* () {\n    yield takeLatest(LOAD_BOX3, loadBox3)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;;AAsCA;;;;;AA/CA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AACA;AAFA;AAAA;AAIA;AACA;AALA;AAIA;AACA;AALA;AAOA;AACA;AADA;AACA;AARA;AAAA;AAWA;AACA;AAZA;AAWA;AAXA;AAYA;AACA;AAbA;AAYA;AAZA;AAeA;AACA;AAhBA;AAAA;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAFA;AACA;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}