{"version":3,"file":"static/webpack/static/development/pages/_app.js.3c63b16c34f8ca0787d8.hot-update.js","sources":["webpack:///./sagas/index.js"],"sourcesContent":["import { call, put, takeLatest, select } from 'redux-saga/effects'\n\nexport const LOAD_BOX3 = 'LOAD_BOX3'\nexport const WEB3_LOADING = 'WEB3_LOADING'\nexport const LOAD_BOX3_PENDING = 'LOAD_BOX3_PENDING'\nexport const LOAD_BOX3_COMPLETE = 'LOAD_BOX3_COMPLETE'\n\nexport const VISIT_SPACES = 'VISIT_SPACES'\n\nimport Box from '3box';\n\nimport Router from 'next/router'\n\n\nasync function syncBox(box) {\n    await new Promise((res, rej) => {\n        box.onSyncDone(res)\n    })\n}\n\nexport function* loadBox3() {\n    yield put({\n        type: WEB3_LOADING\n    })\n    const addresses = yield call(window.ethereum.enable)\n    const myAddress = addresses[0];\n    \n    yield put({\n        type: LOAD_BOX3_PENDING\n    })\n    // // get my box and profile\n    const box = yield call(Box.openBox, myAddress, window.ethereum, {})\n    const myProfile = yield call(Box.getProfile, myAddress)\n\n    yield call(syncBox, box)\n\n    // open 3chat space\n    // const chatSpace = await box.openSpace('3chat');\n    // const myDid = chatSpace.DID;\n\n    // // set all to state and continue\n    // const loggedIn = true\n    // this.setState({ chatSpace, box, myProfile, myAddress, myDid, loggedIn });\n\n\n    yield put({\n        type: LOAD_BOX3_COMPLETE,\n        payload: {\n            box,\n            myProfile,\n            myAddress,\n            loggedIn: true\n            // box, myProfile, myAddress\n        }\n    })\n}\n\nexport function* visitSpaces() {\n    Router.push('/spaces')\n}\n\nexport function* loadSpace() {\n    Box.getSpace(address, name, opts)\n}\n\n\nexport default function* () {\n    yield takeLatest(LOAD_BOX3, loadBox3)\n    yield takeLatest(VISIT_SPACES, visitSpaces)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA;;;AAqCA;;;AAIA;;;;;AA7DA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AACA;AAFA;AAAA;AAIA;AACA;AALA;AAIA;AACA;AALA;AAOA;AACA;AADA;AACA;AARA;AAAA;AAWA;AACA;AAZA;AAWA;AAXA;AAYA;AACA;AAbA;AAYA;AAZA;AAcA;AACA;AAfA;AAAA;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAFA;AACA;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}