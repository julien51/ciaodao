{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loadBox3),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loadSpace),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(_callee);\n\nimport { call, put, takeLatest, select } from 'redux-saga/effects';\nexport var LOAD_BOX3 = 'LOAD_BOX3';\nexport var LOAD_BOX3_COMPLETE = 'LOAD_BOX3_COMPLETE';\nimport Box from '3box';\nexport function loadBox3() {\n  var addresses, myAddress, box, myProfile;\n  return _regeneratorRuntime.wrap(function loadBox3$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return call(window.ethereum.enable);\n\n        case 2:\n          addresses = _context.sent;\n          myAddress = addresses[0];\n          _context.next = 6;\n          return put({\n            type: 'WEB3_LOADING'\n          });\n\n        case 6:\n          _context.next = 8;\n          return call(Box.openBox, myAddress, window.ethereum, {});\n\n        case 8:\n          box = _context.sent;\n          _context.next = 11;\n          return call(Box.getProfile, myAddress);\n\n        case 11:\n          myProfile = _context.sent;\n          _context.next = 14;\n          return put({\n            type: LOAD_BOX3_COMPLETE,\n            payload: {\n              box: box,\n              myProfile: myProfile,\n              myAddress: myAddress // box, myProfile, myAddress\n\n            }\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\nexport function loadSpace() {\n  return _regeneratorRuntime.wrap(function loadSpace$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          Box.getSpace(address, name, opts);\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\nexport default function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return takeLatest(LOAD_BOX3, loadBox3);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","map":{"version":3,"sources":["/Users/liamz/Documents/open-source/everest/social/sagas/index.js"],"names":["loadBox3","loadSpace","call","put","takeLatest","select","LOAD_BOX3","LOAD_BOX3_COMPLETE","Box","window","ethereum","enable","addresses","myAddress","type","openBox","box","getProfile","myProfile","payload","getSpace","address","name","opts"],"mappings":";;;;yBAOiBA,Q;;;yBAiCAC,S;;;;;AAxCjB,SAASC,IAAT,EAAeC,GAAf,EAAoBC,UAApB,EAAgCC,MAAhC,QAA8C,oBAA9C;AAEA,OAAO,IAAMC,SAAS,GAAG,WAAlB;AACP,OAAO,IAAMC,kBAAkB,GAAG,oBAA3B;AAEP,OAAOC,GAAP,MAAgB,MAAhB;AAEA,OAAO,SAAUR,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACe,iBAAME,IAAI,CAACO,MAAM,CAACC,QAAP,CAAgBC,MAAjB,CAAV;;AADf;AACGC,UAAAA,SADH;AAEGC,UAAAA,SAFH,GAEeD,SAAS,CAAC,CAAD,CAFxB;AAAA;AAGH,iBAAMT,GAAG,CAAC;AACNW,YAAAA,IAAI,EAAE;AADA,WAAD,CAAT;;AAHG;AAAA;AAQS,iBAAMZ,IAAI,CAACM,GAAG,CAACO,OAAL,EAAcF,SAAd,EAAyBJ,MAAM,CAACC,QAAhC,EAA0C,EAA1C,CAAV;;AART;AAQGM,UAAAA,GARH;AAAA;AAUe,iBAAMd,IAAI,CAACM,GAAG,CAACS,UAAL,EAAiBJ,SAAjB,CAAV;;AAVf;AAUGK,UAAAA,SAVH;AAAA;AAsBH,iBAAMf,GAAG,CAAC;AACNW,YAAAA,IAAI,EAAEP,kBADA;AAENY,YAAAA,OAAO,EAAE;AACLH,cAAAA,GAAG,EAAHA,GADK;AAELE,cAAAA,SAAS,EAATA,SAFK;AAGLL,cAAAA,SAAS,EAATA,SAHK,CAIL;;AAJK;AAFH,WAAD,CAAT;;AAtBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiCP,OAAO,SAAUZ,SAAV;AAAA;AAAA;AAAA;AAAA;AACHO,UAAAA,GAAG,CAACY,QAAJ,CAAaC,OAAb,EAAsBC,IAAtB,EAA4BC,IAA5B;;AADG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKP,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,iBAAMnB,UAAU,CAACE,SAAD,EAAYN,QAAZ,CAAhB;;AADW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { call, put, takeLatest, select } from 'redux-saga/effects'\n\nexport const LOAD_BOX3 = 'LOAD_BOX3'\nexport const LOAD_BOX3_COMPLETE = 'LOAD_BOX3_COMPLETE'\n\nimport Box from '3box';\n\nexport function* loadBox3() {\n    const addresses = yield call(window.ethereum.enable)\n    const myAddress = addresses[0];\n    yield put({\n        type: 'WEB3_LOADING'\n    })\n\n    // // get my box and profile\n    const box = yield call(Box.openBox, myAddress, window.ethereum, {})\n    \n    const myProfile = yield call(Box.getProfile, myAddress)\n    // yield call(new Promise((resolve, reject) => box.onSyncDone(resolve)))\n\n    // open 3chat space\n    // const chatSpace = await box.openSpace('3chat');\n    // const myDid = chatSpace.DID;\n\n    // // set all to state and continue\n    // const loggedIn = true\n    // this.setState({ chatSpace, box, myProfile, myAddress, myDid, loggedIn });\n\n\n    yield put({\n        type: LOAD_BOX3_COMPLETE,\n        payload: {\n            box,\n            myProfile,\n            myAddress\n            // box, myProfile, myAddress\n        }\n    })\n}\n\nexport function* loadSpace() {\n    Box.getSpace(address, name, opts)\n}\n\n\nexport default function* () {\n    yield takeLatest(LOAD_BOX3, loadBox3)\n}\n"]},"metadata":{},"sourceType":"module"}